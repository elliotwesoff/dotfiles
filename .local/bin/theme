#!/bin/bash
#
# theme.sh

CONFIG_DIR=~/dotfiles/.config

case "$1" in
  "light")
    echo light > ~/.local/state/colorscheme
    ln -sfv $CONFIG_DIR/kitty/themes/catppuccin-latte.conf $CONFIG_DIR/kitty/theme.conf
    ln -sfv $CONFIG_DIR/polybar/light-theme.ini $CONFIG_DIR/polybar/theme.ini
    ln -sfv $CONFIG_DIR/bspwm/bspwmrc-light $CONFIG_DIR/bspwm/bspwmrc-theme
  ;;
  "dark")
    echo dark > ~/.local/state/colorscheme
    ln -sfv $CONFIG_DIR/kitty/themes/harper.conf $CONFIG_DIR/kitty/theme.conf
    ln -sfv $CONFIG_DIR/polybar/dark-theme.ini $CONFIG_DIR/polybar/theme.ini
    ln -sfv $CONFIG_DIR/bspwm/bspwmrc-dark $CONFIG_DIR/bspwm/bspwmrc-theme
  ;;
esac

export XORG_COLORSCHEME=$(cat ~/.local/state/colorscheme)

# restart polybar
polybar-msg cmd restart

# set new background image
$HOME/dotfiles/.fehbg &

# restart bspwm
bspc wm -r

# change kitty colors
kitty @ set-colors -a $CONFIG_DIR/kitty/theme.conf

